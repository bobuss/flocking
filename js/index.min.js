!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=a("./utils").randInt,d=a("./utils").randFloat,e=a("./vector"),f=a("./color"),g=function(a,b){this.position=a.copy(),this.velocity=new e(d(-1,1),d(-1,1)),this.acceleration=new e(0,0),this.r=2,this.shapes=b,this.color=new f(c(0,255),c(0,255),c(0,255))};g.height=500,g.width=500,g.max_speed=2,g.max_force=.05,g.neighbour_radius=45,g.desired_separation=5,g.gravity=26,g.prototype.step=function(a){var b=this.flock(a).plus(this.avoidWalls());this.velocity=this.velocity.plus(b).limit(g.max_speed),this.position=this.position.plus(this.velocity),this._wrapIfNeeded()},g.prototype.flock=function(a){var b=this.separate(a),c=this.align(a),d=this.cohere(a);return b.plus(c).plus(d)},g.prototype.cohere=function(a){for(var b=new e(0,0),c=0,d=0;d<a.length;d++){var f=a[d],h=this.position.distance(f.position);h>0&&h<g.neighbour_radius&&(b=b.plus(f.position),c++)}return c>0?this.steer_to(b.scale(1/c)):b},g.prototype.steer_to=function(a){var b=a.minus(this.position),c=b.magnitude();return c>0?(b=b.normalize(),b=b.scale(100>c?g.max_speed*(c/100):g.max_speed),b.minus(this.velocity).limit(g.max_force)):new e(0,0)},g.prototype.align=function(a){for(var b=new e(0,0),c=0,d=0;d<a.length;d++){var f=a[d],h=this.position.distance(f.position);h>0&&h<g.neighbour_radius&&(b=b.plus(f.velocity),c++)}return c>0&&(b=b.scale(1/c)),b=b.limit(g.max_force)},g.prototype.separate=function(a){for(var b=new e(0,0),c=0,d=0;d<a.length;d++){var f=a[d],h=this.position.distance(f.position);h>0&&h<g.desired_separation&&(b=b.plus(this.position.minus(f.position).normalize().scale(1/h)),c++)}return c>0&&(b=b.scale(1/c)),b},g.prototype.avoidWalls=function(){for(var a=new e(0,0),b=0;b<this.shapes.length;++b){var c=this.shapes[b],d=c.distance(this.position),f=d.point,h=d.distance,i=f.minus(this.position);0>h&&(h=.01),h>0&&h<5*g.neighbour_radius&&(a=a.plus(i.normalize().scale(-1/(h*h))))}return a.scale(g.gravity)},g.prototype._wrapIfNeeded=function(){this.position.x<0?this.position.x=g.width:this.position.x>g.width&&(this.position.x=0),this.position.y<0?this.position.y=g.height:this.position.y>g.height&&(this.position.y=0)},g.prototype.render=function(){g.ctx.fillStyle=this.color.toRGBA(),g.ctx.fillRect(this.position.x,this.position.y,4,4)},b.exports=g},{"./color":3,"./utils":7,"./vector":8}],2:[function(a,b){"use strict";var c=a("./utils").Hit,d=function(a,b){this.center=a,this.radius=b};d.prototype.distance=function(a){var b=a.distance(this.center)-this.radius,d=new c;return d.point=this.center,d.distance=b,d},d.prototype.render=function(){d.ctx.beginPath(),d.ctx.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI,!1),d.ctx.lineWidth=1,d.ctx.strokeStyle="#FF3377",d.ctx.stroke()},b.exports=d},{"./utils":7}],3:[function(a,b){"use strict";var c=function(a,b,c){this.r=a,this.g=b,this.b=c};c.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+" , 0.8)"},b.exports=c},{}],4:[function(a,b){"use strict";var c=a("./utils").randInt,d=a("./vector"),e=a("./line"),f=a("./circle"),g=a("./boid"),h=function(a,b){var c=document.createElement("canvas");this.ctx=c.getContext("2d"),b=b||{},g.height=this.height=c.height=b.height||500,g.width=e.width=this.width=c.width=b.width||500,g.max_speed=b.max_speed||2,g.max_force=b.max_force||.05,g.neighbour_radius=b.neighbour_radius||45,g.desired_separation=b.desired_separation||5,g.gravity=b.gravity||26;var d=b.N||100;this.shapes=b.shapes||[],a.appendChild(c),this.boids=[],f.ctx=g.ctx=e.ctx=this.ctx;for(var h=0;d>h;h++)this.addBoid();this.reqAnimationFrame()};h.prototype.addBoid=function(){this.boids.push(new g(new d(c(0,this.width),c(0,this.height)),this.shapes))},h.prototype.reqAnimationFrame=function(){window.requestAnimationFrame(this.onComputeFrame.bind(this))},h.prototype.onComputeFrame=function(){this.reqAnimationFrame(),this.ctx.fillStyle="rgba(0, 0, 0, 0.1)",this.ctx.fillRect(0,0,this.width,this.height);var a;for(a=0;a<this.shapes.length;a++)this.shapes[a].render();for(a=0;a<this.boids.length;a++){var b=this.boids[a];b.step(this.boids),b.render()}},b.exports=h},{"./boid":1,"./circle":2,"./line":6,"./utils":7,"./vector":8}],5:[function(a){"use strict";var b=a("./vector"),c=a("./line"),d=a("./circle"),e=a("./flocking"),f=a("./utils").HEIGHT,g=a("./utils").WIDTH;document.addEventListener("DOMContentLoaded",function(){var a=f/1.4,h=g,i=[new c(3,54),new c(-.12,154),new d(new b(h/1.8,a/1.3),h/13),new d(new b(h/2.1,a/2.9),h/21),new d(new b(h/3.3,a/2.4),h/29)];new e(document.getElementById("flocking"),{N:200,height:a,width:h,max_speed:2,max_force:.07,neighbour_radius:g/30,desired_separation:5,gravity:6,shapes:i})})},{"./circle":2,"./flocking":4,"./line":6,"./utils":7,"./vector":8}],6:[function(a,b){"use strict";var c=a("./utils").Hit,d=a("./vector"),e=function(a,b){this.m=a,this.z=b,this.a=a,this.b=-1,this.c=b};e.prototype.equation=function(a){return this.m*a+this.z},e.prototype.distance=function(a){var b=this.a*this.a+this.b*this.b,e=Math.abs(this.a*a.x+this.b*a.y+this.c)/Math.sqrt(b),f=new d((this.b*this.b*a.x-this.a*this.b*a.y-this.a*this.c)/b,(-this.a*this.b*a.x+this.a*this.a*a.y-this.b*this.c)/b),g=new c;return g.point=f,g.distance=e,g},e.prototype.render=function(){var a=e.ctx;a.beginPath(),a.moveTo(0,this.equation(0)),a.lineTo(e.width,this.equation(e.width)),a.lineJoin="round",a.lineWidth=2,a.strokeStyle="rgba(200,200,200,1)",a.stroke()},b.exports=e},{"./utils":7,"./vector":8}],7:[function(a,b,c){"use strict";var d=1e8,e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),f=Math.max(document.documentElement.clientHeight,window.innerHeight||0),g=function(a,b){return Math.floor(Math.random()*(b-a))+a},h=function(a,b){return Math.random()*(b-a)+a},i=function(){this.point=d,this.distance=d};c.INFINY=d,c.randInt=g,c.randFloat=h,c.Hit=i,c.WIDTH=e,c.HEIGHT=f},{}],8:[function(a,b){"use strict";var c=function(a,b){this.x=a,this.y=b};c.prototype.copy=function(){return new c(this.x,this.y)},c.prototype.plus=function(a){return new c(this.x+a.x,this.y+a.y)},c.prototype.minus=function(a){return new c(this.x-a.x,this.y-a.y)},c.prototype.scale=function(a){return new c(this.x*a,this.y*a)},c.prototype.dot=function(a){return this.x*a.x+this.y*a.y},c.prototype.magnitude=function(){return Math.sqrt(this.dot(this))},c.prototype.normalize=function(){return this.scale(1/this.magnitude())},c.prototype.limit=function(a){var b=this.magnitude();return b>a?this.scale(a/b):this},c.prototype.distance=function(a){return this.minus(a).magnitude()},b.exports=c},{}]},{},[5]);