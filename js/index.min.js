!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=a("./utils").randInt,d=a("./utils").randFloat,e=a("./vector3d"),f=a("./color"),g=function(a,b){this.position=a.copy(),this.velocity=new e(d(-1,1),d(-1,1),d(-1,1)),this.acceleration=new e(0,0,0),this.r=2,this.shapes=b,this.color=new f(c(0,255),c(0,255),c(0,255))};g.height=500,g.width=500,g.deep=500,g.minDeep=200,g.zoom=200,g.maxSpeed=2,g.maxForce=.05,g.neighbourRadius=45,g.desiredSeparation=5,g.gravity=26,g.center=new e(0,0,(g.deep-g.minDeep)/2),g.prototype.step=function(a){var b=this.flock(a).plus(this.avoidWalls()).plus(this.avoidShapes());this.velocity=this.velocity.plus(b).limit(g.maxSpeed),this.position=this.position.plus(this.velocity),this.wrapIfNeeded()},g.prototype.flock=function(a){var b=this.separate(a),c=this.align(a),d=this.cohere(a);return b.plus(c).plus(d)},g.prototype.cohere=function(a){var b,c,d,f=new e(0,0,0),h=0;for(b=0;b<a.length;b++)c=a[b],d=this.position.distance(c.position),d>0&&d<g.neighbourRadius&&(f=f.plus(c.position),h++);return h>0?this.steerTo(f.scale(1/h)):f},g.prototype.steerTo=function(a){var b=a.minus(this.position),c=b.magnitude();return c>0?(b=b.normalize(),b=b.scale(100>c?g.maxSpeed*(c/100):g.maxSpeed),b.minus(this.velocity).limit(g.maxForce)):new e(0,0,0)},g.prototype.align=function(a){var b,c,d,f=new e(0,0,0),h=0;for(b=0;b<a.length;b++)c=a[b],d=this.position.distance(c.position),d>0&&d<g.neighbourRadius&&(f=f.plus(c.velocity),h++);return h>0&&(f=f.scale(1/h)),f=f.limit(g.maxForce)},g.prototype.separate=function(a){var b,c,d,f=new e(0,0,0),h=0;for(b=0;b<a.length;b++)c=a[b],d=this.position.distance(c.position),d>0&&d<g.desiredSeparation&&(f=f.plus(this.position.minus(c.position).normalize().scale(1/d)),h++);return h>0&&(f=f.scale(1/h)),f},g.prototype.avoidWalls=function(){var a,b,c,d=new e(0,0,0),f=[];for(f.push(new e(this.position.x,this.position.y,g.minDeep)),f.push(new e(this.position.x,this.position.y,g.deep)),f.push(new e(this.position.x,g.height/2,this.position.z)),f.push(new e(this.position.x,-g.height/2,this.position.z)),f.push(new e(g.width/2,this.position.y,this.position.z)),f.push(new e(-g.width/2,this.position.y,this.position.z)),a=0;a<f.length;a++)b=f[a].minus(this.position),c=b.magnitude(),0>c&&(c=.01),c>0&&c<5*g.neighbourRadius&&(d=d.plus(b.normalize().scale(-1/(c*c))));return d.scale(g.gravity)},g.prototype.avoidShapes=function(){var a,b,c,d,f,h,i=new e(0,0,0);for(a=0;a<this.shapes.length;++a)b=this.shapes[a],c=b.distance(this.position),d=c.point,f=c.distance,h=d.minus(this.position),0>f&&(f=.01),f>0&&f<5*g.neighbourRadius&&(i=i.plus(h.normalize().scale(-1/(f*f))));return i.scale(g.gravity)},g.prototype.wrapIfNeeded=function(){this.position.x<-g.width/2?this.position.x=g.width/2:this.position.x>g.width/2&&(this.position.x=-g.width),this.position.y<-g.height/2?this.position.y=g.height/2:this.position.y>g.height/2&&(this.position.y=-g.height/2),this.position.z<g.minDeep?this.position.z=g.deep:this.position.z>g.deep&&(this.position.z=g.minDeep)},g.prototype.projected=function(){return{x:this.position.x/this.position.z*g.zoom+g.width/2,y:this.position.y/this.position.z*g.zoom+g.height/2}},g.prototype.size=function(){var a=5;return a*(1-this.position.z/g.deep)},g.prototype.isVisible=function(){var a,b,c=!0;for(b=0;b<this.shapes.length;++b)a=this.shapes[b],c=c&&!a.isHiding(this.position);return c},g.prototype.render=function(){if(this.isVisible()){var a=this.projected(),b=this.size();g.ctx.fillStyle=this.color.toRGBA(),g.ctx.fillRect(a.x,a.y,b,b)}},b.exports=g},{"./color":3,"./utils":7,"./vector3d":9}],2:[function(a,b){"use strict";var c=a("./utils").Hit,d=function(a,b){this.center=a,this.radius=b};d.prototype.distance=function(a){var b=a.distance(this.center)-this.radius,d=new c;return d.point=this.center,d.distance=b,d},d.prototype.render=function(){d.ctx.beginPath(),d.ctx.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI,!1),d.ctx.lineWidth=1,d.ctx.strokeStyle="#FF3377",d.ctx.stroke()},b.exports=d},{"./utils":7}],3:[function(a,b){"use strict";var c=function(a,b,c){this.r=a,this.g=b,this.b=c};c.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+" , 0.8)"},b.exports=c},{}],4:[function(a,b){"use strict";var c=a("./utils").randInt,d=a("./vector3d"),e=a("./line"),f=a("./circle"),g=a("./boid"),h=function(a,b){var c=document.createElement("canvas");this.ctx=c.getContext("2d"),b=b||{},g.height=this.height=c.height=b.height||500,g.width=e.width=this.width=c.width=b.width||500,g.deep=500,g.maxSpeed=b.maxSpeed||2,g.maxForce=b.maxForce||.05,g.neighbourRadius=b.neighbourRadius||45,g.desiredSeparation=b.desiredSeparation||5,g.gravity=b.gravity||26;var d=b.N||100;this.shapes=b.shapes||[],a.appendChild(c),this.boids=[],f.ctx=g.ctx=e.ctx=this.ctx;for(var h=0;d>h;h++)this.addBoid();this.reqAnimationFrame()};h.prototype.addBoid=function(){this.boids.push(new g(new d(c(0,this.width)-this.width/2,c(0,this.height)-this.height/2,c(g.minDeep,g.deep)),this.shapes))},h.prototype.reqAnimationFrame=function(){window.requestAnimationFrame(this.onComputeFrame.bind(this))},h.prototype.onComputeFrame=function(){this.reqAnimationFrame(),this.ctx.save(),this.ctx.fillStyle="rgba(0, 0, 0, 0.1)",this.ctx.fillRect(0,0,this.width,this.height);var a;for(a=0;a<this.shapes.length;a++)this.shapes[a].render();for(a=0;a<this.boids.length;a++){var b=this.boids[a];b.step(this.boids),b.render()}this.ctx.restore()},b.exports=h},{"./boid":1,"./circle":2,"./line":6,"./utils":7,"./vector3d":9}],5:[function(a){"use strict";var b=a("./flocking"),c=a("./utils").HEIGHT,d=a("./utils").WIDTH;document.addEventListener("DOMContentLoaded",function(){var a=c/1.4,e=d,f=[];new b(document.getElementById("flocking"),{N:220,height:a,width:e,maxSpeed:3,maxForce:.02,neighbourRadius:85,desiredSeparation:50,gravity:8,shapes:f})})},{"./flocking":4,"./utils":7}],6:[function(a,b){"use strict";var c=a("./utils").Hit,d=a("./vector"),e=function(a,b){this.m=a,this.z=b,this.a=a,this.b=-1,this.c=b};e.prototype.equation=function(a){return this.m*a+this.z},e.prototype.distance=function(a){var b=this.a*this.a+this.b*this.b,e=Math.abs(this.a*a.x+this.b*a.y+this.c)/Math.sqrt(b),f=new d((this.b*this.b*a.x-this.a*this.b*a.y-this.a*this.c)/b,(-this.a*this.b*a.x+this.a*this.a*a.y-this.b*this.c)/b),g=new c;return g.point=f,g.distance=e,g},e.prototype.render=function(){var a=e.ctx;a.beginPath(),a.moveTo(0,this.equation(0)),a.lineTo(e.width,this.equation(e.width)),a.lineJoin="round",a.lineWidth=2,a.strokeStyle="rgba(200,200,200,1)",a.stroke()},b.exports=e},{"./utils":7,"./vector":8}],7:[function(a,b,c){"use strict";var d=1e8,e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),f=Math.max(document.documentElement.clientHeight,window.innerHeight||0),g=function(a,b){return Math.floor(Math.random()*(b-a))+a},h=function(a,b){return Math.random()*(b-a)+a},i=function(){this.point=d,this.distance=d};c.INFINY=d,c.randInt=g,c.randFloat=h,c.Hit=i,c.WIDTH=e,c.HEIGHT=f},{}],8:[function(a,b){"use strict";var c=function(a,b){this.x=a,this.y=b};c.prototype.copy=function(){return new c(this.x,this.y)},c.prototype.plus=function(a){return new c(this.x+a.x,this.y+a.y)},c.prototype.minus=function(a){return new c(this.x-a.x,this.y-a.y)},c.prototype.scale=function(a){return new c(this.x*a,this.y*a)},c.prototype.dot=function(a){return this.x*a.x+this.y*a.y},c.prototype.magnitude=function(){return Math.sqrt(this.dot(this))},c.prototype.normalize=function(){return this.scale(1/this.magnitude())},c.prototype.limit=function(a){var b=this.magnitude();return b>a?this.scale(a/b):this},c.prototype.distance=function(a){return this.minus(a).magnitude()},b.exports=c},{}],9:[function(a,b){"use strict";var c=function(a,b,c){this.x=a,this.y=b,this.z=c};c.prototype.copy=function(){return new c(this.x,this.y,this.z)},c.prototype.plus=function(a){return new c(this.x+a.x,this.y+a.y,this.z+a.z)},c.prototype.minus=function(a){return new c(this.x-a.x,this.y-a.y,this.z-a.z)},c.prototype.scale=function(a){return new c(this.x*a,this.y*a,this.z*a)},c.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},c.prototype.magnitude=function(){return Math.sqrt(this.dot(this))},c.prototype.normalize=function(){return this.scale(1/this.magnitude())},c.prototype.limit=function(a){var b=this.magnitude();return b>a?this.scale(a/b):this},c.prototype.distance=function(a){return this.minus(a).magnitude()},c.prototype.toAngles=function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.magnitude())}},b.exports=c},{}]},{},[5]);